{"md5":"50daea7dae5820278dcf7ec09ea2cbe9","content":"\n\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\">&#x6982;&#x8FF0;</h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n<p>\n&#x73B0;&#x6709; 3 &#x4E2A;&#x8282;&#x70B9; (NodeManager), &#x5047;&#x8BBE;&#x4E3A; host1, host2, host3. &#x9700;&#x8981;&#x5C06; 3 &#x4E2A;&#x8282;&#x70B9;&#x5212;&#x5206;&#x72EC;&#x7ACB;&#x7684;&#x961F;&#x5217;\n</p>\n</div>\n</div>\n\n\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\">&#x524D;&#x7F6E;&#x51C6;&#x5907;</h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n<ul class=\"org-ul\">\n<li>&#x4F7F;&#x7528; capacity scheduler &#x8C03;&#x5EA6;&#x7B56;&#x7565;\n</li>\n</ul>\n<p>\n&#x5728; yarn-site.xml &#x4E2D;&#x6DFB;&#x52A0;\n</p>\n<div class=\"org-src-container\">\n\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"title\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"title\">name</span>&gt;</span>yarn.resourcemanager.scheduler.class<span class=\"tag\">&lt;/<span class=\"title\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"title\">value</span>&gt;</span>org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler<span class=\"tag\">&lt;/<span class=\"title\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"title\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</div>\n<p>\n&#x6CE8;: &#x76EE;&#x524D;&#x53EF;&#x7528;&#x7684;&#x8C03;&#x5EA6;&#x7B56;&#x7565;&#x6709; <a href=\"https://hadoop.apache.org/docs/r2.7.2/hadoop-yarn/hadoop-yarn-site/FairScheduler.html\">FairScheduler</a>&#x3001;<a href=\"https://hadoop.apache.org/docs/r2.7.2/hadoop-yarn/hadoop-yarn-site/CapacityScheduler.html\">CapacityScheduler</a> &#x548C; FIFOScheduler\n</p>\n<ul class=\"org-ul\">\n<li>&#x5F00;&#x542F; Node Labels\n</li>\n</ul>\n<p>\n&#x5728; yarn-site.xml &#x4E2D;&#x6DFB;&#x52A0;\n</p>\n<div class=\"org-src-container\">\n\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"title\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"title\">name</span>&gt;</span>yarn.node-labels.enabled<span class=\"tag\">&lt;/<span class=\"title\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"title\">value</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"title\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"title\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</div>\n<ul class=\"org-ul\">\n<li>&#x8BBE;&#x7F6E; Node Label &#x4FE1;&#x606F;&#x5B58;&#x50A8; HDFS &#x8DEF;&#x5F84;\n</li>\n</ul>\n<p>\n&#x521B;&#x5EFA; HDFS &#x8DEF;&#x5F84;\n</p>\n<div class=\"org-src-container\">\n\n<figure class=\"highlight zsh\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo su hdfs</span><br><span class=\"line\">hadoop fs -mkdir -p /yarn/node-labels</span><br><span class=\"line\">hadoop fs -chown -R yarn:yarn /yarn</span><br><span class=\"line\">hadoop fs -chmod -R <span class=\"number\">700</span> /yarn</span><br></pre></td></tr></table></figure>\n</div>\n<p>\n&#x5728; yarn-site.xml &#x4E2D;&#x6DFB;&#x52A0;\n</p>\n<div class=\"org-src-container\">\n\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"title\">property</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"title\">name</span>&gt;</span>yarn.node-labels.fs-store.root-dir<span class=\"tag\">&lt;/<span class=\"title\">name</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"title\">value</span>&gt;</span>/system/yarn/node-labels<span class=\"tag\">&lt;/<span class=\"title\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"title\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</div>\n</div>\n</div>\n\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"sec-3\">&#x521B;&#x5EFA; Node Labels</h2>\n<div class=\"outline-text-2\" id=\"text-3\">\n<p>\n&#x521B;&#x5EFA; 3 &#x4E2A;&#x540D;&#x4E3A; label_a, label_b, label_c &#x7684; Node Labels\n</p>\n<div class=\"org-src-container\">\n\n<figure class=\"highlight zsh\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo su yarn</span><br><span class=\"line\">yarn rmadmin -addToClusterNodeLabels <span class=\"string\">&quot;label_a(exclusive=true),label_b(exclusive=true),label_c(exclusive=true)&quot;</span></span><br></pre></td></tr></table></figure>\n</div>\n<p>\n&#x6CE8;: exclusive &#x9ED8;&#x8BA4;&#x4E3A; true, true &#x8868;&#x793A;&#x5F53;&#x524D; partition &#x7A7A;&#x95F2;&#x7684;&#x8D44;&#x6E90;&#x4E0D;&#x53EF;&#x88AB; default partition &#x7684;&#x4EFB;&#x52A1;&#x4F7F;&#x7528;, false &#x5219;&#x53CD;&#x4E4B;\n</p>\n</div>\n</div>\n<div id=\"outline-container-sec-4\" class=\"outline-2\">\n<h2 id=\"sec-4\">&#x5C06;&#x8282;&#x70B9; (NodeManager) &#x4E0E; Node Labels &#x7ED1;&#x5B9A;</h2>\n<div class=\"outline-text-2\" id=\"text-4\">\n<div class=\"org-src-container\">\n\n<figure class=\"highlight zsh\"><table><tr><td class=\"code\"><pre><span class=\"line\">yarn rmadmin -replaceLabelsOnNode <span class=\"string\">&quot;host1=label_a host2=label_b host3=label_c&quot;</span></span><br></pre></td></tr></table></figure>\n</div>\n<p>\n&#x6B64;&#x5904;&#x53EA;&#x5C06;&#x8282;&#x70B9;&#x4E0E; label &#x7ED1;&#x5B9A;(&#x672A;&#x6307;&#x5B9A; NodeManager &#x7684;&#x7AEF;&#x53E3;), &#x82E5; host &#x4E0A;&#x5B58;&#x5728;&#x591A;&#x4E2A; NodeManager &#x8FDB;&#x7A0B;&#x5219;&#x5747;&#x7ED1;&#x5B9A;&#x540C;&#x4E00;&#x4E2A; label. &#x53E6;&#x5916;, &#x5355;&#x4E2A; Node &#x53EA;&#x80FD;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A; label, &#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86;&#x7AEF;&#x53E3;, &#x5219;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x53EA;&#x80FD;&#x7ED1;&#x5B9A;&#x8FD9;&#x4E00;&#x4E2A; label.\n</p>\n</div>\n</div>\n"}
